<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Procesador de Imágenes - Charlie_mx</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <style>
        :root {
            --primary: #3B82F6;
            --primary-hover: #2563EB;
            --surface: #FFFFFF;
            --background: #F8FAFC;
            --text-primary: #1E293B;
            --text-secondary: #64748B;
            --border-light: #E2E8F0;
            --shadow-card: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-subtle: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header { background-color: var(--surface); box-shadow: var(--shadow-subtle); border-bottom: 1px solid var(--border-light); }
        .header-container { max-width: 64rem; margin: 0 auto; padding: 0 1rem; }
        .header-content { display: flex; justify-content: space-between; align-items: center; height: 4rem; }

        .logo-container { display: flex; align-items: center; }
        .logo-icon { width: 2rem; height: 2rem; color: var(--primary); margin-right: 0.75rem; }
        .logo-text { font-size: 1.25rem; font-weight: 700; color: var(--primary); }

        .nav-desktop { display: none; align-items: center; gap: 2rem; }
        .nav-link-active { color: var(--primary); font-weight: 500; text-decoration: none; }
        .nav-link { color: var(--text-secondary); text-decoration: none; transition: color 0.2s ease; }
        .nav-link:hover { color: var(--primary); }

        .mobile-menu-btn { display: block; padding: 0.5rem; border-radius: 0.5rem; border: none; background: none; cursor: pointer; transition: background-color 0.2s ease; }
        .mobile-menu-btn:hover { background-color: #F1F5F9; }
        .mobile-menu-icon { width: 1.5rem; height: 1.5rem; color: var(--text-primary); }

        .mobile-menu { display: none; padding: 0.5rem 1rem 0.75rem; background-color: var(--surface); border-top: 1px solid var(--border-light); }
        .mobile-menu.active { display: block; }
        .mobile-menu-item { display: block; padding: 0.5rem 0.75rem; text-decoration: none; transition: color 0.2s ease; }
        .mobile-menu-item.active { color: var(--primary); font-weight: 500; }
        .mobile-menu-item:not(.active) { color: var(--text-secondary); }
        .mobile-menu-item:hover { color: var(--primary); }

        .main-content { flex: 1; display: flex; align-items: center; justify-content: center; padding: 3rem 0; }
        .content-container { max-width: 32rem; width: 100%; margin: 0 auto; padding: 0 1rem; }

        .main-card { background-color: var(--surface); border-radius: 0.5rem; box-shadow: var(--shadow-card); padding: 2rem; text-align: center; }
        .main-title { font-size: 1.875rem; font-weight: 700; color: var(--primary); margin-bottom: 1.5rem; }

        .file-input-container { margin-bottom: 2rem; }
        .file-input { display: block; width: 100%; padding: 1rem 1.5rem; border: 2px dashed rgba(59, 130, 246, 0.3); border-radius: 0.5rem; background-color: rgba(59, 130, 246, 0.05); cursor: pointer; transition: all 0.3s ease; font-family: inherit; }
        .file-input:hover { border-color: rgba(59, 130, 246, 0.5); background-color: rgba(59, 130, 246, 0.1); }

        .submit-button { display: inline-flex; align-items: center; padding: 1rem 2rem; background-color: var(--primary); color: white; font-weight: 500; font-size: 1.125rem; border: none; border-radius: 0.5rem; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .submit-button:hover { background-color: var(--primary-hover); transform: translateY(-1px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .submit-button:active { transform: scale(0.95); }
        .button-icon { width: 1.5rem; height: 1.5rem; margin-right: 0.5rem; }

        .footer { background-color: var(--surface); border-top: 1px solid var(--border-light); margin-top: auto; }
        .footer-container { max-width: 64rem; margin: 0 auto; padding: 2rem 1rem; }
        .footer-content { text-align: center; }
        .footer-logo { display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; }
        .footer-logo-icon { width: 1.5rem; height: 1.5rem; color: var(--primary); margin-right: 0.5rem; }
        .footer-logo-text { font-size: 1.125rem; font-weight: 700; color: var(--primary); }
        .footer-copyright { color: var(--text-secondary); font-size: 0.875rem; }

        .hidden { display: none !important; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="header-content">
                <div class="logo-container">
                    <svg class="logo-icon" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M16 2L20.5 10.5L30 12L22 20L24 30L16 25L8 30L10 20L2 12L11.5 10.5L16 2Z"/>
                        <circle cx="16" cy="16" r="4" fill="white"/>
                    </svg>
                    <span class="logo-text">Charlie_mx</span>
                </div>
                <nav class="nav-desktop">
                    <a href="/static/results_archive.html" class="nav-link-active">Procesador</a>
                    <a href="/static/help_center.html" class="nav-link">Ayuda</a>
                </nav>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <svg class="mobile-menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
        </div>
        <div class="mobile-menu hidden" id="mobileMenu">
            <a href="/static/results_archive.html" class="mobile-menu-item active">Procesador</a>
            <a href="/static/help_center.html" class="mobile-menu-item">Ayuda</a>
        </div>
    </header>

    <main class="main-content">
        <div class="content-container">
            <div class="main-card">
                <h1 class="main-title">Bienvenido a Charlie_mx.dominio</h1>
                <form id="formulario" enctype="multipart/form-data" class="form-container">
                    <div class="file-input-container">
                        <input type="file" name="file" id="file" accept="image/*" required class="file-input" />
                    </div>
                    <button type="submit" class="submit-button">
                        <svg class="button-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        Procesar Imagen
                    </button>
                </form>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-logo">
                    <svg class="footer-logo-icon" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M16 2L20.5 10.5L30 12L22 20L24 30L16 25L8 30L10 20L2 12L11.5 10.5L16 2Z"/>
                        <circle cx="16" cy="16" r="4" fill="white"/>
                    </svg>
                    <span class="footer-logo-text">Charlie_mx</span>
                </div>
                <p class="footer-copyright">© 2025 Charlie_mx. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Toggle menú móvil
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        });

        // Procesamiento de imágenes
        document.getElementById('formulario').addEventListener('submit', async function (e) {
            e.preventDefault();
            const fileField = document.querySelector('#file');
            if (!fileField.files[0]) {
                alert("Por favor, selecciona una imagen primero.");
                return;
            }

            const formData = new FormData();
            formData.append('file', fileField.files[0]);

            const backendUrl = 'https://test-production-37d0.up.railway.app/procesar-imagen-local/';

            try {
                const response = await fetch(backendUrl, {
                    method: 'POST',
                    body: formData,
                });

                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'imagen_procesada.pdf';
                    document.body.appendChild(a);
                    a.click();
                    a.remove();
                    window.URL.revokeObjectURL(url);
                } else {
                    const errorData = await response.json().catch(() => ({ detail: `Error ${response.status}` }));
                    alert(`Error al procesar la imagen: ${errorData.detail}`);
                }
            } catch (err) {
                alert("No se pudo conectar con el servidor: " + err.message);
            }
        });
    </script>
</body>
</html>
